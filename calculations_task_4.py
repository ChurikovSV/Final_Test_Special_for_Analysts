# Результаты теста Шапиро-Уилка с p-value равным 0.00002 при уровне значимости alpha = 5% (или 0.05) указывают на то, что данные не следуют нормальному распределению,
# поскольку p-value меньше alpha. Это означает, что отвергнута нулевая гипотеза о том, что данные распределены нормально.
# Для анализа различий между двумя группами при ненормальном распределении данных обычно используются непараметрические методы.
# Двумя популярными непараметрическими тестами для сравнения двух независимых выборок являются:
# Критерий Манна-Уитни (также известный как тест Уилкоксона для двух независимых выборок);
# Критерий Крускалла-Уоллиса – если необходимо сравнить более двух групп.

import numpy as np
from scipy.stats import mannwhitneyu, shapiro, lognorm

# Генерация двух выборок из логнормального распределения
np.random.seed(42)  # Для воспроизводимости результатов
data1 = lognorm(s=0.5).rvs(2350)  # выборка 1
data2 = lognorm(s=0.5).rvs(2350)  # выборка 2

# Применение критерия Манна-Уитни
u_stat, p_value = mannwhitneyu(data1, data2)

# Проверка нормальности для подтверждения
shapiro_p1 = shapiro(data1[:5000]).pvalue  # Уменьшаем размер выборки из-за ограничений Шапиро-Уилка
shapiro_p2 = shapiro(data2[:5000]).pvalue

print(u_stat, p_value, shapiro_p1, shapiro_p2)

